<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>后台管理</title>
    <link th:href="@{/css/login.css}" rel="stylesheet" type="text/css"/>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>
</head>

<body>

<div class="login_box" ng-app="myApp" ng-controller="login">
    <div class="login_l_img"><img th:src="@{/img/login-img.png}"/></div>
    <div class="login">
        <div class="login_logo"><a href="#"><img th:src="@{/img/login_logo.png}"/></a></div>
        <div class="login_name" style="margin: 10px">
            <h2 style="color: #30a5ff">快递小哥后台管理系统</h2>
        </div>

        <input name="user" type="text" placeholder="用户名" id="username">
        <input name="password" type="password" id="password" placeholder="密码"/>
        <button class="btn btn-primary" style="width:100%;height: 48px" ng-click="loginbyuser()">登录</button>
    </div>
    <div class="copyright">嘉兴学院数学与信息学院 版权所有©2017-2019 技术支持电话：173-7413-1273</div>
</div>
<script>
    var app = angular.module('myApp', []);
    app.controller('login', function ($scope, $http) {
        $scope.loginbyuser = function () {
            $http.get("http://localhost:8080/user/login?username=" + document.getElementById("username").value + "&password=" + document.getElementById("password").value)
                .then(function successCallback(response) {
                    $scope.name = response.data;
                    if ($scope.name.username === document.getElementById("username").value && $scope.name.password === document.getElementById("password").value) {
                        window.location.href = "http://localhost:8080/map/index";
                        alert("登陆成功")
                    } else {
                        alert("登陆失败，账号或密码不对")
                    }
                }, function errorCallback(reason) {
                    alert("错误" + reason)
                });
        }
    });

</script>

</body>
</html>
